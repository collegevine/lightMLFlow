<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>A Lightweight, Opinionated R Wrapper for the MLFlow REST API • lightMLFlow</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="bootstrap-toc.css">
<script src="bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="pkgdown.css" rel="stylesheet">
<script src="pkgdown.js"></script><meta property="og:title" content="A Lightweight, Opinionated R Wrapper for the MLFlow REST API">
<meta property="og:description" content="MLFlow &lt;https://www.mlflow.org/&gt; is an open-source tool for tracking, versioning, and
    deploying machine learning models. This package provides a lightweight
    R wrapper for the MLFlow REST API &lt;https://www.mlflow.org/docs/latest/rest-api.html&gt;. It makes some assumptions (notably,
    that you already have an MLFlow instance running, you want to use S3
    for artifact storage, and you intend to deploy models in an (e.g.)
    plumber API), but, in return, you get some benefits: A simpler API,
    not needing reticulate, relying on aws.s3 where possible, etc.">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    

    <div class="container template-home">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="index.html">lightMLFlow</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">0.6.6</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="reference/index.html">Reference</a>
</li>
<li>
  <a href="news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right"></ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="contents col-md-9">

<div class="section level1">
<div class="page-header"><h1 id="lightmlflow">lightMLFlow<a class="anchor" aria-label="anchor" href="#lightmlflow"></a>
</h1></div>
<p>A lightweight R wrapper for the MLFlow REST API</p>
<!-- badges: start -->
</div>
<div class="section level1">
<h1 id="setup">Setup<a class="anchor" aria-label="anchor" href="#setup"></a>
</h1>
<p><code>lightMLFlow</code> will soon be on CRAN!</p>
<p>For now, you can install it from Github as follows:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># install.packages("devtools")</span>

<span class="fu">devtools</span><span class="fu">::</span><span class="fu">install_github</span><span class="op">(</span><span class="st">"collegevine/lightMLFlow"</span><span class="op">)</span></code></pre></div>
</div>
<div class="section level1">
<h1 id="the-package">The Package<a class="anchor" aria-label="anchor" href="#the-package"></a>
</h1>
<p>This package differs from the CRAN <code>mlflow</code> package in a few important ways.</p>
<p>First, there are some things that the full CRAN <code>mlflow</code> package has that this package doesn’t:</p>
<ul>
<li>
<code>mlflow</code> supports more configurable artifact stores, while <code>lightMLFlow</code> only supports S3 as the artifact store. That said, we would love contributions from Azure or GCP users to extend this functionality!</li>
<li>
<code>mlflow</code> allows you to run <code>install_mlflow()</code> to install MLFlow on your machine. <code>lightMLFlow</code> assumes you’re using an MLFlow instance that’s either running locally or hosted on a cloud server.</li>
<li>
<code>mlflow</code> lets you run the MLFlow UI directly from the package, which <code>lightMLFlow</code> does not. Again, <code>lightMLFlow</code> is made to be used with a deployed MLFlow instance, which means that your instance needs to already exist (either on local on on a cloud server).</li>
</ul>
<p>However, there are also significant advantages to using <code>lightMLFlow</code> over <code>mlflow</code>:</p>
<ul>
<li>
<code>lightMLFlow</code> features a friendlier API, with significantly fewer functions, no <code>mlflow::mlflow_*</code> function prefixing (following Tidyverse conventions, <code>lightMLFlow</code> function names are verbs), and improved error handling.</li>
<li>
<code>lightMLFlow</code> fixes some bugs in <code>mlflow</code>’s API wrapping functions.</li>
<li>
<code>lightMLFlow</code> is significantly more lightweight than <code>mlflow</code>. It doesn’t depend on <code>httpuv</code>, <code>reticulate</code>, or <code>swagger</code>, and has a more minimal footprint in general.</li>
<li>
<code>lightMLFlow</code> uses <code>aws.s3</code> to put and save objects to and from S3, which means you don’t need to have a <code>boto3</code> install on your machine running your <code>MLFlow</code> code. This is an essential change, as it means that <code>lightMLFlow</code> does not require <em>any</em> Python infrastructure, as opposed to <code>mlflow</code>, which does.</li>
<li>
<code>mlflow</code> (and, specifically, <code>MLFlow Projects</code>) doesn’t play particularly nicely with <code>renv</code>. The reason for that is that an <code>MLProject</code> file that’s pointed at a Git repo will try to clone and run the code from scratch. But with <code>renv</code>, we like restoring a package cache in CI and baking it into the Docker image that the code lives in so that we don’t need to install all of the R packages the project needs every time we run the project. <code>lightMLFlow</code> hacks its way around this problem by allowing the user to run <code><a href="reference/set_git_tracking_tags.html">set_git_tracking_tags()</a></code>, which tricks the MLFlow REST API into thinking that the code was run from an MLFlow Project even when it wasn’t. This lets you keep your normal (e.g.) <code>renv</code> workflow in place and get the benefit of linked Git commits in the MLFlow UI without actually needing any of the <code>MLProject</code> infrastructure or setup steps.</li>
<li>For artifact and model logging, <code>lightMLFlow</code> logs R objects directly so that you don’t need to worry about first saving a file to disk and then copying it to your artifact store.</li>
<li>In addition, <code>lightMLFlow</code> allows artifacts to be loaded directly into the R session in one shot, instead of first being saved to disk and then loaded afterwards. This eliminates lines of code and the headache associated with going S3 –&gt; disk –&gt; R by abstracting away the disk reads and writes.</li>
<li>In <code>lightMLFlow</code>, <code>create_experiment</code> returns the experiment when one with the specified name already exists, instead of erroring.</li>
<li>
<code>lightMLFlow</code> adds <code>get_param</code> and <code>get_metric</code> helpers to make it easier to get the most recent value of a metric or param for a run.</li>
<li>
<code>lightMLFlow</code> leverages some R-ish ways of doing things in reworking <code>log_params</code> and <code>log_metrics</code>, which both take dot args of metrics or params to log, and then call <code><a href="reference/log_batch.html">log_batch()</a></code> on the backend. This results in a far friendlier API than needing to specify a key and value separately and forcing the user to make multiple calls to <code>log_param</code> (e.g.) for each key-value pair. With <code>lightMLFlow</code>, you can do this to log two params: <code>log_params(foo, bar = "baz")</code>, which will log the value of <code>foo</code> as <code>foo</code> (it automagically generates the param name by deparsing the name of the R object), and will log <code>bar</code> as <code>"baz"</code>.</li>
<li>When logging metrics, <code>lightMLFlow</code> abstracts away timestamps and steps from the user, automatically setting the timestamp to the current time (UTC) and auto-incrementing the step if the metric being logged already exists.</li>
<li>If a run errors out, <code>lightMLFlow</code> logs the error as an artifact (a markdown document) to help with the debugging process.</li>
</ul>
<div class="section level2">
<h2 id="known-issues--future-work">Known Issues / Future Work<a class="anchor" aria-label="anchor" href="#known-issues--future-work"></a>
</h2>
<ol style="list-style-type: decimal">
<li>Clarify the parameter names for things like <code>path</code>, <code>model_path</code>, etc. since they don’t make much sense right now.</li>
<li>Clarify the difference between <code>save_model</code> and <code>log_model</code>.</li>
<li>Add Azure and GCP artifact stores.</li>
</ol>
</div>
</div>

  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <div class="license">
<h2 data-toc-skip>License</h2>
<ul class="list-unstyled">
<li><a href="LICENSE.html">Full license</a></li>
<li><small>Apache License (&gt;= 2)</small></li>
</ul>
</div>


<div class="citation">
<h2 data-toc-skip>Citation</h2>
<ul class="list-unstyled">
<li><a href="authors.html#citation">Citing lightMLFlow</a></li>
</ul>
</div>

<div class="developers">
<h2 data-toc-skip>Developers</h2>
<ul class="list-unstyled">
<li>Matt Kaye <br><small class="roles"> Author, maintainer </small>  </li>
<li>Tony ElHabr <br><small class="roles"> Author </small>  </li>
</ul>
</div>

<div class="dev-status">
<h2 data-toc-skip>Dev status</h2>
<ul class="list-unstyled">
<li><a href="https://github.com/collegevine/lightMLFlow/actions" class="external-link"><img src="https://github.com/collegevine/lightMLFlow/workflows/R-CMD-check/badge.svg" alt="R-CMD-check"></a></li>
<li><a href="https://lifecycle.r-lib.org/articles/stages.html#experimental" class="external-link"><img src="https://img.shields.io/badge/lifecycle-experimental-orange.svg" alt="Lifecycle: experimental"></a></li>
</ul>
</div>

  </div>
</div>


      <footer><div class="copyright">
  <p></p>
<p>Developed by Matt Kaye, Tony ElHabr.</p>
</div>

<div class="pkgdown">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.4.</p>
</div>

      </footer>
</div>

  


  

  </body>
</html>
